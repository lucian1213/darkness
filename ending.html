<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>이 어둠을 당신과_엔딩 분기</title>
  <style>
    @font-face {
      font-family: 'GowunBatang';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunBatang-Regular.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }

    /* 기본: 바디 스크롤 막고, 내부 전용 스크롤 영역을 사용 */
    html, body {
      height: 100%;
      overflow: hidden; /* ✅ 바디 스크롤 방지 */
    }

    body {
      font-family: 'GowunBatang', serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      color: #fff;
      background-color: #000;
      position: relative;
      font-size: 14px;
      overscroll-behavior: contain; /* 모바일 바운스 줄이기 */
    }

    /* 화면에 고정된 배경 레이어 */
    .page-bg {
      position: fixed;
      inset: 0;
      z-index: -2;
      background-image: url('dark.png');
      background-repeat: no-repeat;
      background-position: center 15%; /* 기본값 */
      background-size: contain;           /* 전체 보이게 */
      background-color: #000;
      pointer-events: none; /* 클릭 등 방해 X */
    }

    /* 모바일에서는 배경을 살짝 위로 */
    @media (max-width: 480px) {
      .page-bg {
        background-position: center 40%;
      }
    }

    /* ✅ 전용 스크롤 영역: 여기서만 스크롤 발생 */
    .scroll-area {
      position: relative;
      overflow: auto;
      -webkit-overflow-scrolling: touch;

      /* 폴백들(지원되는 것 중 마지막 유효값이 적용됨) */
      height: 100vh;   /* 가장 넓은 호환(주소창 출렁임 있을 수 있음) */
      height: 100svh;  /* 주소창 표시 상태 기준 */
      height: 100lvh;  /* 주소창 숨김 후 최대 높이 기준 */

      /* 최종: JS로 계산한 고정 높이(주소창 접힘 무시)
         JS가 못 돌면 위 폴백들이 적용됨 */
      height: calc(var(--vh, 1vh) * 100);
    }

    h1 {
      color: #fff;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      font-size: 1.5em;
      margin-top: 120px; /* 시작 위치를 더 내리고 싶으면 이 값을 키워주세요 */
    }

    .subtitle {
      font-size: 0.9em;
      color: #ddd;
      text-align: center;
      margin-top: -10px;
      margin-bottom: 20px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    .content-container {
      background-color: rgba(30, 30, 30, 0);
      margin-top: 20px;      /* 제목과 본문 사이 간격 */
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.5);
      width: fit-content;
      max-width: 80%;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }

    .description {
      color: #ddd;
      font-size: 1em;
      line-height: 1.6;
      margin-bottom: 20px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    button {
      background-color: #f2e2cc;
      color: #333;
      border: none;
      padding: 12px 25px;
      font-size: 14px;
      border-radius: 5px;
      cursor: pointer;
      display: block;
      margin: 30px auto 60px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s, background-color 0.2s;
      font-family: 'GowunBatang', serif;
    }

    button:hover { background-color: #4b8be0; transform: translateY(-2px); }
    button:active { transform: translateY(1px); }

    /* 모바일 글자/여백 미세 튜닝 */
    @media (max-width: 480px) {
      body { padding: 10px; font-size: 13px; }
      h1 { font-size: 1.4em; }
      .content-container { padding: 15px; max-width: 95%; }
      .description { font-size: 0.95em; }
    }
  </style>
</head>
<body>
  <!-- 고정 배경 -->
  <div class="page-bg" aria-hidden="true"></div>

  <!-- ✅ 전용 스크롤 영역 -->
  <main class="scroll-area">
    <h1>이 어둠을 당신과 엔딩 분기</h1>
  

    <div class="content-container">
      <div class="description">
        해당 페이지는 다같이 질문을 따라가며 해당하는 엔딩을<br>
        확인하는 페이지입니다.<br>
        각자의 대사는 해당하는 플레이어가 읽습니다.<br><br>
        모두 페이지에 접속했다면, 다음을 눌러 질문을 확인합니다.
      </div>

      <button id="next-button">다음</button>
    </div>
  </main>

  <script>
    /* ✅ 주소창 접힘 무시용 고정 vh 계산 (최초 1회만) */
    (function setStableVH() {
      const setVH = () => {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
      };
      setVH();
      // 회전 등 레이아웃이 실제로 변할 때만 갱신 (일반 스크롤에는 갱신 안 함)
      window.addEventListener('orientationchange', () => {
        setTimeout(setVH, 300);
      });
    })();

    /* 페이지 전환(두 번째 페이지가 길어져도 .scroll-area 안에서만 스크롤됨) */
    document.getElementById('next-button').addEventListener('click', function () {
      const container = document.querySelector('.content-container');
      container.innerHTML = `
        <div class="description">
          <strong>※ 질문</strong><br><br>
          자칭 탐정 리처드에게 질문입니다.<br>
          범인의 밀실 살인 방법은 무엇이었나요?<br>
          (리처드 답지의 Q3번 답안의 확인)<br><br>

          <strong>A. 악마 소환을 통해 밀실에서 빠져나왔다.</strong><br><br>

          <span style="font-size: 0.9em; color: #bbb;">
          ※ 의미상으로 「악마 소환을 통해 악마가 마법진 위로 이동하는 것을 이용하여 밀실을 빠져나왔다」 는 것을 지적해야 합니다.<br><br>
          따라서, 답변 내에 「악마 소환」 이나 「마법진」이라는 단어가 있더라도, 예를 들어 「어떤 악마의 힘으로 빠져나왔다」 혹은 「살해한 후 엘리자베스의 방에서 마법진을 그려 악마를 불러내어 밖으로 나가게 해달라고 했다」 등 다른 방법을 답한 경우는 오답으로 처리합니다.
          </span>
        </div>

        <div style="margin-top: 30px;">
          <button id="correct-answer" style="margin-bottom: 15px;">정답을 맞췄다</button>
          <button id="incorrect-answer" style="margin-bottom: 30px;">정답을 맞추지 못했다</button>

          <div style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 20px;">
            <button id="previous-branch" style="font-size: 12px; padding: 8px 20px;">이전 분기로</button>
          </div>
        </div>
      `;

      document.getElementById('correct-answer').addEventListener('click', () => {
        alert('정답을 맞췄습니다! 다음 단계로 진행합니다.');
      });
      document.getElementById('incorrect-answer').addEventListener('click', () => {
        alert('아쉽게도 정답을 맞추지 못했습니다.');
      });
      document.getElementById('previous-branch').addEventListener('click', () => {
        location.reload();
      });
    });
  </script>
</body>
</html>
